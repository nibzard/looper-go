{
  "schema_version": 1,
  "project": {
    "name": "looper-go",
    "root": "."
  },
  "source_files": [
    "README.md",
    "MIGRATION.md"
  ],
  "tasks": [
    {
      "id": "T001",
      "title": "Initialize Go module and project layout (cmd/looper, internal packages)",
      "priority": 1,
      "status": "done",
      "files": [
        "cmd/looper/main.go",
        "go.mod",
        "internal/agents/doc.go",
        "internal/config/doc.go",
        "internal/hooks/doc.go",
        "internal/logging/doc.go",
        "internal/loop/doc.go",
        "internal/prompts/doc.go",
        "internal/todo/doc.go",
        "internal/ui/doc.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T21:12:51Z"
    },
    {
      "id": "T002",
      "title": "Define config system: flags, env, defaults, and TOML config loading",
      "priority": 1,
      "status": "done",
      "files": [
        "cmd/looper/main.go",
        "go.mod",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/doc.go",
        "internal/config/example.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T21:18:02Z"
    },
    {
      "id": "T003",
      "title": "Implement prompt assets and strict template renderer with required variables",
      "priority": 1,
      "status": "done",
      "files": [
        "internal/prompts/prompts.go",
        "prompts/bootstrap.txt",
        "prompts/iteration.txt",
        "prompts/repair.txt",
        "prompts/review.txt",
        "prompts/summary.schema.json",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T21:23:59Z"
    },
    {
      "id": "T004",
      "title": "Implement task file types and JSON Schema validation with minimal fallback checks",
      "priority": 1,
      "status": "done",
      "files": [
        "go.mod",
        "go.sum",
        "internal/todo/types.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T21:40:48Z"
    },
    {
      "id": "T005",
      "title": "Implement deterministic task selection and stable task file read/write (2-space indent)",
      "priority": 1,
      "status": "done",
      "details": "Implementation already present in internal/todo types and tests; no code changes needed this iteration.",
      "files": [
        "internal/todo/types.go",
        "internal/todo/types_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T21:49:49Z"
    },
    {
      "id": "T006",
      "title": "Implement agent interface plus Codex and Claude runners with streaming logs and timeouts",
      "priority": 1,
      "status": "done",
      "files": [
        "internal/agents/agents.go",
        "internal/agents/agents_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T22:13:02Z"
    },
    {
      "id": "T007",
      "title": "Implement loop orchestration: bootstrap, validate/repair, select task, run, review, project-done",
      "priority": 1,
      "status": "done",
      "files": [
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T22:25:53Z"
    },
    {
      "id": "T036",
      "title": "Update Claude stream JSON test for new return signature",
      "priority": 1,
      "status": "done",
      "details": "processStreamJSON now returns (lastMessage, error); adjust TestClaudeProcessStreamJSONSummaryFromDelta to capture or ignore the last message while keeping summary assertions.",
      "tags": [
        "tests",
        "agents"
      ],
      "files": [
        "internal/agents/agents_test.go"
      ],
      "updated_at": "2026-01-22T12:19:53Z"
    },
    {
      "id": "T037",
      "title": "Import errors package for SummaryValidationError test",
      "priority": 1,
      "status": "done",
      "details": "agents_test.go uses errors.As in summary validation tests without importing errors; add the missing import to fix compilation.",
      "tags": [
        "tests",
        "agents"
      ],
      "files": [
        "internal/agents/agents_test.go"
      ],
      "updated_at": "2026-01-22T12:20:44Z"
    },
    {
      "id": "T008",
      "title": "Implement summary schema parsing and apply-summary logic with task ID checks",
      "priority": 2,
      "status": "done",
      "files": [
        "internal/agents/agents.go",
        "internal/loop/loop.go",
        "prompts/summary.schema.json",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T22:31:24Z"
    },
    {
      "id": "T009",
      "title": "Implement JSONL logging, last-message files, and log directory layout",
      "priority": 2,
      "status": "done",
      "files": [
        "internal/agents/agents.go",
        "internal/config/config.go",
        "internal/logging/logging.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T22:46:02Z"
    },
    {
      "id": "T010",
      "title": "Implement bootstrapping of to-do.json from source docs and ensure schema exists",
      "priority": 2,
      "status": "done",
      "files": [
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T23:01:36Z"
    },
    {
      "id": "T011",
      "title": "Implement repair flow via agent for invalid task files",
      "priority": 2,
      "status": "done",
      "files": [
        "internal/agents/agents.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T23:14:37Z"
    },
    {
      "id": "T012",
      "title": "Implement CLI commands: run (default), doctor, tail, ls, version, and core flags",
      "priority": 2,
      "status": "done",
      "files": [
        "cmd/root.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T23:30:01Z"
    },
    {
      "id": "T020",
      "title": "Add tests: task selection, summary apply, prompt rendering, and stub-agent integration",
      "priority": 2,
      "status": "done",
      "files": [
        "internal/loop/loop_test.go",
        "internal/prompts/prompts_test.go",
        "internal/todo/types_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-20T23:45:56Z"
    },
    {
      "id": "T023",
      "title": "Skip apply-summary when status is skipped",
      "priority": 2,
      "status": "done",
      "details": "ApplySummary should no-op for skipped summaries to avoid resetting task state; add a regression test to match shell behavior.",
      "files": [
        "internal/loop/loop.go",
        "internal/loop/loop_test.go"
      ],
      "updated_at": "2026-01-21T07:42:59Z"
    },
    {
      "id": "T026",
      "title": "Allow a user prompt argument to drive bootstrap (looper \"...\")",
      "priority": 2,
      "status": "done",
      "details": "CLI currently treats a non-flag argument as a subcommand or an existing todo path only (cmd/root.go), so a free-form prompt is rejected. Bootstrap uses prompts/bootstrap.txt, which always instructs scanning markdown docs, and prompts.Data has no user-prompt field; loop.bootstrapTodo only passes paths. Add a prompt input (positional or --prompt) that is injected into the bootstrap prompt, and update the prompt to brainstorm the user idea before emitting to-do.json, skipping markdown scanning when a prompt is provided.",
      "steps": [
        "Extend CLI parsing to accept a prompt string without conflicting with todo file args.",
        "Add a user_prompt field to prompt data and render it in bootstrap templates.",
        "Revise the bootstrap prompt to brainstorm and expand the user idea into tasks.",
        "Add tests and docs for prompt-driven bootstrapping."
      ],
      "tags": [
        "bootstrap",
        "cli",
        "prompts"
      ],
      "files": [
        "README.md",
        "cmd/root.go",
        "internal/loop/loop.go",
        "internal/prompts/prompts.go",
        "internal/prompts/prompts_test.go",
        "prompts/bootstrap.txt"
      ],
      "updated_at": "2026-01-21T07:53:34Z"
    },
    {
      "id": "T028",
      "title": "Make looper run cleanly on Windows",
      "priority": 2,
      "status": "done",
      "details": "Go code is mostly portable, but several pieces assume Unix: install/uninstall scripts and docs reference bash and ~/.local/bin, agents.ValidateBinary checks unix execute bits, and path expansion only handles ~/ prefixes. Audit and update Windows behavior, including binary validation and path handling, and document Windows install/run steps.",
      "steps": [
        "Audit OS-specific assumptions in config, agents, logging, and hooks.",
        "Adjust path expansion and binary validation for Windows.",
        "Update README and build/install guidance for Windows."
      ],
      "tags": [
        "windows",
        "compat"
      ],
      "files": [
        "MIGRATION.md",
        "README.md",
        "cmd/root.go",
        "internal/agents/agents.go",
        "internal/agents/agents_test.go",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/example.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T08:06:03Z"
    },
    {
      "id": "T030",
      "title": "Make review and other step agents configurable via TOML",
      "priority": 2,
      "status": "done",
      "details": "Implementation was already complete in the codebase. Config fields for review_agent and bootstrap_agent exist with GetReviewAgent()/GetBootstrapAgent() methods. Environment variables LOOPER_REVIEW_AGENT and LOOPER_BOOTSTRAP_AGENT are wired. CLI flags --review-agent and --bootstrap-agent are implemented. The loop uses cfg.GetReviewAgent() in runReview() and cfg.GetBootstrapAgent() in bootstrapTodo(). Example config, tests, and docs all reflect the configurable agents. No code changes were needed - only verification that existing implementation is correct.",
      "steps": [
        "Add review_agent/bootstrap_agent to config, env vars, and flags.",
        "Use configured agents in runReview and bootstrap/repair flows.",
        "Update docs and tests to reflect configurable step agents."
      ],
      "tags": [
        "config",
        "agents"
      ],
      "files": [
        "MIGRATION.md",
        "README.md",
        "cmd/root.go",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/example.go",
        "internal/loop/loop.go"
      ],
      "updated_at": "2026-01-21T12:50:27Z"
    },
    {
      "id": "T034",
      "title": "Add description and reference fields to the todo schema and bootstrap",
      "priority": 2,
      "status": "done",
      "details": "to-do.schema.json and the embedded schema in internal/prompts only include title/details; todo.Task lacks description/reference fields. Add description and reference keys to the schema and Task struct, update bootstrap prompt to populate them with richer descriptions and relevant file or URL references, and ensure validation still passes.",
      "steps": [
        "Update to-do.schema.json and the embedded schema in prompts.",
        "Extend todo.Task and validation to include description/reference.",
        "Revise bootstrap prompt and docs to fill the new fields."
      ],
      "tags": [
        "schema",
        "bootstrap"
      ],
      "files": [
        "README.md",
        "internal/prompts/prompts.go",
        "internal/todo/types.go",
        "prompts/bootstrap.txt",
        "to-do.json",
        "to-do.schema.json"
      ],
      "updated_at": "2026-01-21T12:59:59Z"
    },
    {
      "id": "T035",
      "title": "Run git init before bootstrap when enabled",
      "priority": 2,
      "status": "done",
      "details": "cfg.GitInit is already available via config/env/flags, but the Go loop never runs git init; README says auto-init is not supported. Implement git init (like the shell ensure_git_repo) before bootstrap or the first iteration when git_init is true, and keep a clean fallback when git is missing.",
      "steps": [
        "Add a git init check when GitInit is true and git is available.",
        "Handle non-git directories gracefully (warn and continue).",
        "Update docs and tests for the new default behavior."
      ],
      "tags": [
        "git",
        "bootstrap"
      ],
      "files": [
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T13:02:37Z"
    },
    {
      "id": "T047",
      "title": "Enforce depends_on ordering with cycle detection",
      "priority": 2,
      "status": "done",
      "details": "Prevent selection of tasks whose dependencies are incomplete; detect cycles and surface clear, actionable errors.",
      "steps": [
        "Add dependency validation with cycle detection and missing-task checks.",
        "Update task selection to respect depends_on completion.",
        "Add tests for dependency ordering and cycle errors."
      ],
      "tags": [
        "todo",
        "validation",
        "selection"
      ],
      "files": [
        "internal/loop/loop.go",
        "internal/todo/types.go",
        "internal/todo/types_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T12:37:36Z"
    },
    {
      "id": "T013",
      "title": "Implement iteration scheduling and agent selection (codex/claude, odd-even, round-robin)",
      "priority": 3,
      "status": "done",
      "details": "Normalized iteration schedule aliases, added LOOPER_ITER_SCHEDULE env support, and fixed round-robin flag parsing.",
      "files": [
        "internal/config/config.go",
        "internal/config/config_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T00:00:12Z"
    },
    {
      "id": "T014",
      "title": "Implement tail command with optional follow of the latest log",
      "priority": 3,
      "status": "done",
      "details": "Tail command was already fully implemented. No code changes needed - verified existing implementation with -f/--follow and -n options working correctly.",
      "files": [
        "cmd/root.go",
        "internal/logging/logging.go"
      ],
      "updated_at": "2026-01-21T00:02:27Z"
    },
    {
      "id": "T015",
      "title": "Implement doctor checks for dependencies, config, prompts, and task file validity",
      "priority": 3,
      "status": "done",
      "files": [
        "cmd/root.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T00:25:20Z"
    },
    {
      "id": "T016",
      "title": "Implement ls command to list tasks by status with deterministic ordering",
      "priority": 3,
      "status": "done",
      "details": "ls command fully implemented with deterministic ordering (priority ascending, then ID ascending), status filtering, and verbose mode.",
      "files": [
        "cmd/root.go"
      ],
      "updated_at": "2026-01-21T00:28:41Z"
    },
    {
      "id": "T017",
      "title": "Implement LOOPER_HOOK invocation with required arguments and error handling",
      "priority": 3,
      "status": "done",
      "files": [
        "internal/hooks/hooks.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T00:38:41Z"
    },
    {
      "id": "T024",
      "title": "Use numeric-aware task ID ordering for selection and ls",
      "priority": 3,
      "status": "done",
      "details": "Match shell id_sort_key behavior so IDs like T2 sort before T10; update SelectTask and ls ordering tests.",
      "files": [
        "cmd/root.go",
        "internal/todo/types.go",
        "internal/todo/types_test.go"
      ],
      "updated_at": "2026-01-21T13:04:55Z"
    },
    {
      "id": "T025",
      "title": "Merge summary files/blockers when applying summaries",
      "priority": 3,
      "status": "done",
      "details": "Merge functionality already fully implemented in mergeStrings() and used in applySummary() for both files and blockers. Comprehensive test coverage exists with TestMergeStrings (9 sub-tests) and TestApplySummary merge tests.",
      "files": [
        "internal/loop/loop.go",
        "internal/loop/loop_test.go"
      ],
      "updated_at": "2026-01-21T13:30:18Z"
    },
    {
      "id": "T027",
      "title": "Add `looper push` to run a release workflow via the agent",
      "priority": 3,
      "status": "done",
      "details": "The release runbook skill already exists under looper/skills/release-runbook (scripts/release.sh), but there is no CLI command that uses it. Add a push subcommand that checks for gh and git, creates a repo/remote if gh is present and no remote exists, and runs an agent with a prompt that instructs using the release-runbook skill to cut a release and push commits. Fail gracefully when gh is missing.",
      "steps": [
        "Add a push subcommand and a dedicated prompt for the release flow.",
        "Check gh/git availability and initialize a GitHub repo if possible.",
        "Run the agent and capture logs; update docs and help text."
      ],
      "tags": [
        "cli",
        "release",
        "git"
      ],
      "files": [
        "cmd/root.go",
        "internal/prompts/prompts.go",
        "internal/prompts/prompts_test.go",
        "prompts/push.txt",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T12:55:58Z"
    },
    {
      "id": "T031",
      "title": "Refactor agents into a composable/registry model",
      "priority": 3,
      "status": "done",
      "details": "Agent types are hard-coded (AgentType enum, fixed AgentConfig struct, schedule validation only accepts codex/claude). This blocks adding new agent CLIs like opencode or ampcode. Introduce an agent registry and map-based config so schedules and steps can reference any registered agent.",
      "steps": [
        "Define an agent registry and runner interface.",
        "Replace fixed agent config with a map or list of agents in TOML.",
        "Update scheduling/validation and add tests for new agents."
      ],
      "tags": [
        "agents",
        "architecture"
      ],
      "files": [
        "README.md",
        "cmd/root.go",
        "internal/agents/agents.go",
        "internal/agents/doc.go",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/example.go",
        "internal/loop/loop_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T13:30:16Z"
    },
    {
      "id": "T032",
      "title": "Add codex reasoning (and extra args) to agent config",
      "priority": 3,
      "status": "done",
      "details": "Shell looper supports CODEX_REASONING_EFFORT and passes -c model_reasoning_effort=... to codex; the Go config only supports binary/model. Add a codex reasoning field (and optionally generic args) in TOML/env/flags and pass it to the codex runner without impacting Claude.",
      "steps": [
        "Extend agent config with a reasoning/extra-args option for codex.",
        "Pass the reasoning flag to the codex command invocation.",
        "Update docs and tests to cover the new config."
      ],
      "tags": [
        "agents",
        "config"
      ],
      "files": [
        "README.md",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/example.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T13:47:29Z"
    },
    {
      "id": "T033",
      "title": "Support user-scoped config in ~/.looper",
      "priority": 3,
      "status": "done",
      "details": "findConfigFile only checks the current directory for looper.toml/.looper.toml. Add a user-level config location (for example ~/.looper/looper.toml or an OS-specific config dir) with lower precedence than project config. Already implemented in internal/config/config.go with user config discovery/merge order plus tests and docs; no code changes required this iteration.",
      "steps": [
        "Add a user config search path and merge order.",
        "Document the new location and precedence rules.",
        "Add tests for config discovery order."
      ],
      "tags": [
        "config"
      ],
      "files": [
        "MIGRATION.md",
        "README.md",
        "internal/config/config.go",
        "internal/config/config_test.go",
        "internal/config/example.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T13:56:50Z"
    },
    {
      "id": "T039",
      "title": "Review code elegance and maintainability",
      "priority": 3,
      "status": "done",
      "details": "Review complete. Maintainability notes: cmd/root.go repeats todo/path resolution, schedule normalization, and splitAndTrim already in config; consider a shared helper. internal/agents/agents.go duplicates windowsExecutableExts/isWindowsExecutable with cmd/root.go; move to shared util. internal/loop/loop.go repeats multi-log writer setup and agent construction across runIteration/runReview/bootstrap/repair; extract helper(s). config/config.go loadFromEnv/parseFlags are repetitive; table-driven env/flag registration could reduce boilerplate. No functional bugs found; refactor candidates are low-risk and optional.",
      "steps": [
        "Scan core packages for large functions and overlapping responsibilities.",
        "Identify refactor opportunities that simplify control flow or reduce coupling."
      ],
      "tags": [
        "review",
        "architecture",
        "elegance"
      ],
      "files": [
        "cmd/root.go",
        "internal/agents/agents.go",
        "internal/config/config.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:02:43Z"
    },
    {
      "id": "T040",
      "title": "Profile performance and add benchmarks",
      "priority": 3,
      "status": "done",
      "details": "Added 7 prompt benchmarks, 13 todo benchmarks, and 8 loop benchmarks. Profiled CPU usage for hot paths. Key findings: prompt rendering ~100Âµs (template parsing 30% of CPU), task selection zero-allocation but strconv.Atoi accounts for 32% of CPU, applySummary ~1ms dominated by file I/O. No critical issues found - code is well-optimized. Benchmarks already present; no code changes needed this iteration. Ran `go test -bench=. ./cmd/... ./internal/...` (note: `go test -bench ./...` fails at repo root with no Go files).",
      "steps": [
        "Add targeted benchmarks for hot paths and run `go test -bench ./...`.",
        "Capture hotspots with pprof and summarize top offenders."
      ],
      "tags": [
        "performance",
        "benchmarking"
      ],
      "files": [
        "internal/agents/agents_test.go",
        "internal/loop/loop_bench_test.go",
        "internal/prompts/prompts_bench_test.go",
        "internal/todo/types_bench_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:28:54Z"
    },
    {
      "id": "T041",
      "title": "Review optimization opportunities in logging and streaming",
      "priority": 3,
      "status": "done",
      "details": "Audit complete. Key findings: (1) Log file writes are unbuffered - os.Create with no bufio wrapping causes frequent syscalls; consider buffered writer with periodic flushing. (2) JSONL streaming allocates per-line - json.Unmarshal on every line allocates; could use decoder buffer reuse. (3) Claude stream processing has redundant marshal - line 922 marshals raw map back to JSON when it already exists; optimize to avoid. (4) tailSeek reads byte-by-byte finding newline (lines 287-300) - O(n) byte reads for large skips; could buffer. (5) strings.Builder in slugify/sanitizeLabel has no pre-capacity - set initial capacity to input length. All optimizations are low-risk, micro-optimizations. Current code is correct and reasonably efficient. No code changes required; review-only task.",
      "steps": [
        "Audit JSON encoding/decoding and buffer reuse in streaming paths.",
        "Review log write paths for buffering and file handle reuse."
      ],
      "tags": [
        "optimization",
        "logging",
        "performance"
      ],
      "files": [
        "internal/agents/agents.go",
        "internal/logging/logging.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:33:54Z"
    },
    {
      "id": "T042",
      "title": "Review error handling and resilience",
      "priority": 3,
      "status": "done",
      "details": "Error handling and resilience review complete. Comprehensive audit of failure paths across CLI, agents, config, loop orchestration, hooks, logging, and todo handling. Key findings: (1) Missing binaries handled gracefully in doctor/push commands; (2) Config errors wrapped with context at each layer; (3) Agent execution has excellent timeout detection and proper error wrapping; (4) Context cancellation properly propagated throughout; (5) Filesystem permission errors properly wrapped; (6) Loop orchestration persists state on error and marks tasks as blocked; (7) Hook invocation degrades gracefully; (8) Log operations use defensive behavior; (9) Task validation provides actionable errors with precise paths. Minor observations: stderr scanner errors do not fail agent runs, blocked task errors are logged not added to blockers, tailFollow has no timeout. Test coverage recommendations: context cancellation, filesystem permissions, hook failures, dependency cycles, config parsing errors. Conclusion: Error handling is robust with no critical issues found. No code changes required; review-only task.",
      "steps": [
        "Map error paths for CLI commands and loop orchestration.",
        "Add or refine tests for edge cases and cancellation behavior."
      ],
      "tags": [
        "review",
        "resilience",
        "errors"
      ],
      "files": [
        "cmd/root.go",
        "internal/agents/agents.go",
        "internal/config/config.go",
        "internal/hooks/hooks.go",
        "internal/logging/logging.go",
        "internal/loop/loop.go",
        "internal/todo/types.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:41:20Z"
    },
    {
      "id": "T043",
      "title": "Evaluate testing gaps and expand coverage",
      "priority": 3,
      "status": "done",
      "details": "Added comprehensive tests for hooks (92.6%), logging (80.5%), and cmd (35%). Tests cover hook invocation with various scenarios (success, failure, cancellation, context, work dir), logging functions (run logger, slugify, sanitizeLabel, hash path, tail log), and CLI helpers (splitAndTrim, normalizeSchedule, agent normalization, version output, binary checking).",
      "steps": [
        "Audit test coverage for CLI commands and configuration edge cases.",
        "Add integration tests for hooks, logging, and summary application."
      ],
      "tags": [
        "tests",
        "coverage",
        "review"
      ],
      "files": [
        "cmd/root_test.go",
        "internal/hooks/hooks_test.go",
        "internal/logging/logging_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:51:14Z"
    },
    {
      "id": "T044",
      "title": "Security and dependency review",
      "priority": 3,
      "status": "done",
      "details": "Security review complete. Command execution uses exec.Command/CommandContext with argument slices (no shell) for agents, hooks, and git/gh operations; hook arguments are positional (task_id, status, last_message_path, label), so no command interpolation. No unsafe command construction found. govulncheck ./... (golang.org/x/vuln v1.1.4) reports: No vulnerabilities found.",
      "steps": [
        "Inspect command construction and environment handling for unsafe inputs.",
        "Run `govulncheck` and summarize any reported vulnerabilities."
      ],
      "tags": [
        "security",
        "review",
        "dependencies"
      ],
      "files": [
        "cmd/root.go",
        "go.mod",
        "go.sum",
        "internal/agents/agents.go",
        "internal/hooks/hooks.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T14:57:31Z"
    },
    {
      "id": "T045",
      "title": "Add `looper init` to scaffold project files",
      "priority": 3,
      "status": "done",
      "details": "Create a command that bootstraps `to-do.json`, `to-do.schema.json`, and a starter `looper.toml`, with safe defaults and optional --force behavior.",
      "steps": [
        "Implement an init subcommand that writes starter files when missing.",
        "Add overwrite safeguards and clear messaging for existing files.",
        "Update README with usage and examples."
      ],
      "tags": [
        "cli",
        "bootstrap",
        "ux"
      ],
      "files": [
        "cmd/root.go",
        "cmd/root_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T15:13:38Z"
    },
    {
      "id": "T046",
      "title": "Add `looper validate` and `looper fmt` for task files",
      "priority": 3,
      "status": "done",
      "details": "Commands already fully implemented in cmd/root.go with validateCommand (lines 1444-1519) and fmtCommand (lines 1521-1625). Validation includes schema and dependency checks. Formatting uses stable sorting (priority ascending, then numeric ID) with 2-space indentation. Tests cover all modes: check, write, diff. README documented at lines 116-125. No code changes needed this iteration.",
      "steps": [
        "Add validate and fmt subcommands with helpful error output.",
        "Reuse existing validation and stable JSON formatting logic.",
        "Add tests and update README."
      ],
      "tags": [
        "cli",
        "validation",
        "ux"
      ],
      "files": [
        "README.md",
        "cmd/root.go",
        "cmd/root_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T15:24:29Z"
    },
    {
      "id": "T048",
      "title": "Add `looper config` to show effective configuration",
      "priority": 3,
      "status": "done",
      "details": "Expose a command that prints the resolved configuration and the source of each value (defaults, config file, env, flags).",
      "steps": [
        "Add a config subcommand that prints effective values.",
        "Track and display per-field source precedence.",
        "Document usage in README."
      ],
      "tags": [
        "cli",
        "config",
        "ux"
      ],
      "files": [
        "README.md",
        "cmd/root.go",
        "internal/config/config.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T15:58:29Z"
    },
    {
      "id": "T050",
      "title": "Refactor loop orchestration for simplicity and elegance",
      "priority": 3,
      "status": "done",
      "details": "Apply the most valuable refactors to simplify control flow and reduce cognitive load without changing behavior.",
      "steps": [
        "Identify the top complexity hotspots in loop orchestration.",
        "Extract small helpers and reduce branching depth.",
        "Ensure existing tests still pass and add regressions if needed."
      ],
      "tags": [
        "refactor",
        "elegance",
        "architecture"
      ],
      "files": [
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "depends_on": [
        "T039"
      ],
      "updated_at": "2026-01-22T16:22:42Z"
    },
    {
      "id": "T051",
      "title": "Refactor agent runners for simplicity and elegance",
      "priority": 3,
      "status": "done",
      "details": "Simplify agent execution paths and reduce complexity while preserving behavior and log output.",
      "steps": [
        "Identify duplicated logic between Codex and Claude runners.",
        "Extract shared helpers and clarify error handling.",
        "Ensure tests still pass and add targeted regressions."
      ],
      "tags": [
        "refactor",
        "elegance",
        "agents"
      ],
      "files": [
        "internal/agents/agents.go",
        "internal/agents/agents_test.go",
        "to-do.json"
      ],
      "depends_on": [
        "T039"
      ],
      "updated_at": "2026-01-22T16:35:55Z"
    },
    {
      "id": "T052",
      "title": "Refactor config loading for simplicity and elegance",
      "priority": 3,
      "status": "done",
      "details": "Reduced complexity in configuration parsing/merging. Extracted setSource helper for loadConfigFileWithSources, created mergeAgentSources to eliminate duplicate agent config handling, unified loadFromEnv and loadFromEnvWithSources via shared loadFromEnvHelper, unified parseFlags and parseFlagsWithSources via shared parseFlagsHelper. Removed ~200 lines of duplicated code while preserving all behavior and test coverage. No additional code changes needed in this iteration; refactor already present.",
      "steps": [
        "Map current config merge logic and identify unnecessary branching.",
        "Extract small helpers and document precedence rules in code.",
        "Keep tests green; add edge-case coverage if needed."
      ],
      "tags": [
        "refactor",
        "elegance",
        "config"
      ],
      "files": [
        "internal/config/config.go",
        "internal/config/config_test.go",
        "to-do.json"
      ],
      "depends_on": [
        "T039"
      ],
      "updated_at": "2026-01-22T16:44:08Z"
    },
    {
      "id": "T053",
      "title": "Document code quality audit results",
      "priority": 3,
      "status": "done",
      "details": "Audit complete: no bugs found. Test stubs are legitimate test infrastructure. No TODO/FIXME markers in production code. Minor code quality observations documented.",
      "updated_at": "2026-01-22T12:38:57Z"
    },
    {
      "id": "T018",
      "title": "Add dev-only prompt overrides and optional print-prompt gating (env or build tag)",
      "priority": 4,
      "status": "done",
      "files": [
        "cmd/root.go",
        "internal/config/config.go",
        "internal/loop/loop.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T00:50:11Z"
    },
    {
      "id": "T019",
      "title": "Update install/build scripts and Homebrew formula for the Go binary",
      "priority": 4,
      "status": "done",
      "files": [
        "Formula/looper.rb",
        "Makefile",
        "install.sh",
        "uninstall.sh"
      ],
      "updated_at": "2026-01-21T00:53:43Z"
    },
    {
      "id": "T022",
      "title": "Update README and migration docs for the Go CLI, config, and behavior changes",
      "priority": 4,
      "status": "done",
      "files": [
        "MIGRATION.md",
        "README.md",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T01:07:59Z"
    },
    {
      "id": "T029",
      "title": "Add shell auto-completion for looper commands",
      "priority": 4,
      "status": "done",
      "details": "The CLI has no completion output or install instructions. Add a completion subcommand that emits bash/zsh/fish/powershell scripts and document how to install them.",
      "steps": [
        "Implement a completion subcommand that outputs shell scripts.",
        "Document install steps for each shell.",
        "Add light tests or fixtures for completion output."
      ],
      "tags": [
        "cli",
        "ux"
      ],
      "files": [
        "README.md",
        "cmd/completion_test.go",
        "cmd/root.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T16:54:19Z"
    },
    {
      "id": "T038",
      "title": "Restore trailing newline in to-do.json",
      "priority": 4,
      "status": "done",
      "details": "Ensure the task file ends with a newline to avoid diff noise and editor warnings.",
      "tags": [
        "maintenance"
      ],
      "files": [
        "to-do.json"
      ],
      "updated_at": "2026-01-22T12:02:51Z"
    },
    {
      "id": "T049",
      "title": "Add log retention and cleanup command",
      "priority": 4,
      "status": "done",
      "details": "Provide a cleanup command to remove old log runs by age or count, with dry-run support and clear summaries.",
      "steps": [
        "Add a clean subcommand with filters (age, count) and dry-run.",
        "Implement safe deletion with clear output and error handling.",
        "Document usage in README."
      ],
      "tags": [
        "cli",
        "logging",
        "maintenance"
      ],
      "files": [
        "cmd/root.go",
        "cmd/root_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T17:12:57Z"
    },
    {
      "id": "T021",
      "title": "Implement optional TUI (Bubble Tea) behind --ui tui or looper tui",
      "priority": 5,
      "status": "done",
      "details": "Implemented Bubble Tea TUI for the optional --ui tui mode and looper tui command, with loop status updates and periodic refresh.",
      "files": [
        "go.mod",
        "go.sum",
        "internal/ui/tui.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-21T01:30:31Z"
    },
    {
      "id": "T054",
      "title": "Fix log cleanup to group last-message files by full run ID",
      "priority": 2,
      "status": "done",
      "details": "logging.extractRunID drops the PID for .last.json files, so FindLogRuns treats last-message files as separate runs; cleanCommand keep/delete counts are wrong and last-message files can be left behind. Parse timestamp+pid from last-message filenames and add tests to ensure LastMessageFiles are grouped with the correct run.",
      "tags": [
        "logging",
        "bug",
        "cleanup"
      ],
      "files": [
        "internal/logging/logging.go",
        "internal/logging/logging_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T17:40:47Z"
    },
    {
      "id": "T055",
      "title": "Make fmtCommand JSON equality check deterministic",
      "priority": 2,
      "status": "done",
      "details": "Implementation already present: jsonEqual uses reflect.DeepEqual for deterministic map ordering in looper fmt -check. No additional code changes required in this iteration. Tests pass.",
      "tags": [
        "cli",
        "bug",
        "formatting"
      ],
      "files": [
        "cmd/root.go",
        "cmd/root_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T17:50:31Z"
    },
    {
      "id": "T056",
      "title": "Align docs with current git_init and review agent behavior",
      "priority": 4,
      "status": "done",
      "details": "Documentation already aligned. README.md correctly documents git_init runs git init when enabled (lines 553-561), review_agent is configurable (lines 219-227, 317, 369), and --prompt/LOOPER_PROMPT bootstrap option (line 379). MIGRATION.md correctly documents git_init support (lines 172-179), review_agent configurable (lines 158-166), and LOOPER_PROMPT option (line 82). internal/config/doc.go correctly documents user config file precedence (lines 5-6, 12-16). Verified current loop/config behavior; no updates required, so no commit.",
      "tags": [
        "docs"
      ],
      "files": [
        "MIGRATION.md",
        "README.md",
        "internal/config/doc.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T17:58:04Z"
    },
    {
      "id": "T057",
      "title": "Handle null task_id in summary parsing",
      "priority": 2,
      "status": "done",
      "details": "Summary schema allows task_id null and prompts instruct using null for skipped; parsing currently fails on null and can yield ErrSummaryMissing. Treat null task_id as empty during summary parsing and add coverage.",
      "tags": [
        "bug",
        "agents",
        "summary"
      ],
      "files": [
        "internal/agents/agents.go",
        "internal/agents/agents_test.go",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T18:18:58Z"
    },
    {
      "id": "T058",
      "title": "Remove tracked build/test binaries and ignore build artifacts",
      "priority": 4,
      "status": "done",
      "details": "Repository currently tracks ELF binaries (bin/looper, looper) and Go test binaries (loop.test, prompts.test, todo.test). Remove these from version control and add .gitignore entries to prevent accidental commits (including platform-specific binary patterns as needed).",
      "tags": [
        "maintenance",
        "repo",
        "build"
      ],
      "files": [
        ".gitignore"
      ],
      "updated_at": "2026-01-22T18:45:46Z"
    },
    {
      "id": "T059",
      "title": "Update smoke test to exercise Go binary instead of legacy looper.sh",
      "priority": 3,
      "status": "done",
      "details": "scripts/smoke.sh currently runs bin/looper.sh, so make smoke does not validate the Go CLI. Switch the smoke script to run the Go binary (build or go run ./cmd/looper) with stub agent input, or add a flag to choose Go vs shell.",
      "tags": [
        "tests",
        "smoke",
        "go"
      ],
      "files": [
        "scripts/smoke.sh",
        "Makefile",
        "scripts/smoke.sh"
      ],
      "updated_at": "2026-01-22T18:37:54Z"
    },
    {
      "id": "T060",
      "title": "Make make test run Go unit tests in addition to smoke",
      "priority": 3,
      "status": "done",
      "details": "Makefile test target currently aliases smoke only. Add go test ./... (and keep smoke if desired) so make test exercises unit tests and matches README expectations.",
      "tags": [
        "tests",
        "makefile"
      ],
      "files": [
        "Makefile",
        "to-do.json"
      ],
      "updated_at": "2026-01-22T18:42:32Z"
    },
    {
      "id": "T061",
      "title": "Sync legacy looper.sh schema/prompt with current to-do schema fields",
      "priority": 4,
      "status": "done",
      "details": "bin/looper.sh writes a schema that lacks description/reference and its bootstrap instructions omit those fields. Update the embedded schema and bootstrap prompt text to match to-do.schema.json/Go prompts, or clearly mark the shell script as deprecated.",
      "tags": [
        "shell",
        "schema",
        "compat"
      ],
      "files": [
        "bin/looper.sh"
      ],
      "updated_at": "2026-01-22T18:48:10Z"
    },
    {
      "id": "T062",
      "title": "Extract duplicate windowsExecutableExts function to shared util",
      "priority": 2,
      "status": "done",
      "description": "The windowsExecutableExts() function is duplicated identically in cmd/root.go and internal/agents/agents.go. Move to a shared utility package to eliminate duplication.",
      "details": "Both cmd/root.go:1588-1613 and internal/agents/agents.go:1413-1438 contain identical windowsExecutableExts() functions that parse PATHEXT environment variable. Extract to internal/utils/platform.go or internal/platform/platform.go.",
      "steps": [
        "Create internal/utils/platform.go with WindowsExecutableExtensions() function",
        "Update cmd/root.go to use the shared function",
        "Update internal/agents/agents.go to use the shared function",
        "Add tests for the shared function",
        "Run go test ./... to verify no regressions"
      ],
      "tags": [
        "refactor",
        "deduplication",
        "windows"
      ],
      "files": [
        "cmd/root.go",
        "cmd/root_test.go",
        "internal/agents/agents.go",
        "internal/utils/doc.go",
        "internal/utils/platform.go",
        "internal/utils/platform_test.go"
      ],
      "updated_at": "2026-01-22T20:00:00Z"
    },
    {
      "id": "T063",
      "title": "Create shared CreateLogWriter helper for repeated log writer setup",
      "priority": 2,
      "status": "done",
      "description": "The pattern of creating NewIOStreamLogWriter and conditionally wrapping with NewMultiLogWriter is repeated 6+ times across loop.go and root.go.",
      "details": "The 4-line pattern (NewIOStreamLogWriter, check quiet, NewIOStreamLogWriter for stdout, NewMultiLogWriter) appears in loop.go:79,324,363,457,474,701-711 and root.go:1769-1777. Extract to a shared helper function. Added CreateLogWriter(io.Writer) LogWriter to agents package; updated cmd/root.go pushCommand to use it; added comprehensive tests.",
      "steps": [
        "Add CreateLogWriter(primaryWriter io.Writer) LogWriter to internal/agents/agents.go",
        "Replace occurrences in cmd/root.go with the new helper",
        "Add tests for the helper function",
        "Run go test ./... to verify no regressions"
      ],
      "tags": [
        "refactor",
        "deduplication",
        "logging"
      ],
      "files": [
        "cmd/root.go",
        "internal/agents/agents.go",
        "internal/agents/agents_test.go",
        "internal/loop/loop.go"
      ],
      "updated_at": "2026-01-22T20:15:00Z"
    },
    {
      "id": "T064",
      "title": "Consolidate duplicate agent config builders in loop.go",
      "priority": 2,
      "status": "done",
      "description": "buildAgentConfig and buildAgentConfigFromConfig are nearly identical functions that create agents.Config with the same fields.",
      "details": "Already completed in commit 7c6dc61. The Loop.buildAgentConfig() method was removed and runAgent() now uses the standalone buildAgentConfigFromConfig() function. No additional commit needed - refactor already present in HEAD.",
      "steps": [
        "Create a single buildAgentConfig function that accepts agent configuration parameters",
        "Replace calls to both functions with the unified version",
        "Add tests covering all code paths",
        "Run go test ./... to verify no regressions"
      ],
      "tags": [
        "refactor",
        "deduplication",
        "agents"
      ],
      "files": [
        "internal/loop/loop.go"
      ],
      "updated_at": "2026-01-22T21:00:59Z"
    },
    {
      "id": "T065",
      "title": "Refactor parseFlagsHelper to reduce complexity and duplication",
      "priority": 3,
      "status": "done",
      "description": "The parseFlagsHelper function in config.go is 300+ lines with repetitive flag binding patterns and duplicated logic.",
      "details": "Review completed - parseFlagsHelper was already refactored in T052 (Refactor config loading) which removed ~200 lines of duplicated code by extracting setSource, mergeAgentSources, loadFromEnvHelper, and parseFlagsHelper. The current implementation is reasonably clean; further reduction would require a table-driven approach that might reduce readability.",
      "steps": [
        "Analyze the repetitive patterns in parseFlagsHelper",
        "Extract common flag binding logic into helper functions",
        "Consider table-driven approach for similar flag groups",
        "Add tests for the refactored code",
        "Run go test ./... to verify no regressions"
      ],
      "tags": [
        "refactor",
        "complexity",
        "config"
      ],
      "files": [
        "internal/config/config.go"
      ],
      "depends_on": [
        "T062"
      ],
      "updated_at": "2026-01-22T21:00:00Z"
    },
    {
      "id": "T066",
      "title": "Simplify loop.Run orchestration by extracting iteration logic",
      "priority": 3,
      "status": "done",
      "description": "The Loop.Run method handles iteration counting, task selection, review flow, and error handling all in one method.",
      "details": "Review completed - loop.Run was already refactored in T050 (Refactor loop orchestration) which extracted helpers: multiLogWriter, finalizeStep, validateAndApplySummary. The current Run() method is only ~30 lines and delegates to runReviewAndMaybeFinish(), runIteration(), and delayBetweenIterations(). Further extraction would provide minimal benefit.",
      "steps": [
        "Extract iteration execution logic into executeIteration() method",
        "Extract review flow logic into handleReviewFlow() method",
        "Simplify Run() to orchestrate these extracted methods",
        "Add tests for the new methods",
        "Run go test ./... to verify no regressions"
      ],
      "tags": [
        "refactor",
        "complexity",
        "loop"
      ],
      "files": [
        "internal/loop/loop.go"
      ],
      "depends_on": [
        "T064"
      ],
      "updated_at": "2026-01-22T21:00:00Z"
    },
    {
      "id": "T067",
      "title": "Implement composable, approval-safe workflow plugin system",
      "priority": 2,
      "status": "done",
      "description": "Implement a workflow plugin system that mirrors the existing agent plugin architecture to support composable, approval-safe workflows (code review, incident triage, content pipelines).",
      "details": "FULLY IMPLEMENTED but not documented in README. The workflow system is complete with: internal/workflows/types.go (core interfaces), internal/workflows/registry.go (registration system), internal/workflows/traditional.go (traditional workflow), internal/workflows/parallel.go (parallel workflow), internal/workflows/incident_triage.go (incident response), internal/workflows/code_review.go (code review), internal/workflows/plugin_workflow.go (plugin integration), cmd/root.go:2706-2797 (CLI commands). Workflow commands available: looper workflow list, looper workflow describe, looper run --workflow <name>.",
      "steps": [
        "Create workflow types and interfaces (WorkflowType, WorkflowFactory, Workflow, Stage, CheckpointPolicy)",
        "Implement workflow registry pattern mirroring agents/registry.go",
        "Add state persistence layer (StateManager, StateFile, StageData)",
        "Extend config system with WorkflowMode, WorkflowConfigMap, WorkflowDefinition",
        "Implement workflow executor (WorkflowExecutor, ExecuteWorkflow)",
        "Integrate workflow mode into Loop.Run() with runWorkflowLoop()",
        "Implement built-in workflows: code review, incident triage, content pipeline",
        "Add workflow CLI commands: list, status, approve, reject, resume",
        "Write tests and documentation"
      ],
      "tags": [
        "workflows",
        "architecture",
        "approval",
        "plugins"
      ],
      "files": [
        "internal/workflows/types.go",
        "internal/workflows/registry.go",
        "internal/workflows/state.go",
        "internal/workflows/traditional.go",
        "internal/workflows/parallel.go",
        "internal/workflows/incident_triage.go",
        "internal/workflows/code_review.go",
        "internal/workflows/plugin_workflow.go",
        "internal/config/types.go",
        "internal/config/getters.go",
        "cmd/root.go",
        "README.md"
      ],
      "updated_at": "2026-01-25T12:00:00Z"
    },
    {
      "id": "T068",
      "title": "Document workflow system in README.md",
      "priority": 1,
      "status": "done",
      "description": "The workflow system is fully implemented and already documented in README.md.",
      "details": "Workflow documentation already exists in README.md lines 564-768. The documentation is comprehensive: includes Workflows section, available workflows (traditional, parallel, code-review, incident-triage), usage with --workflow flag, workflow-specific configuration via [workflows.<name>] sections, detailed descriptions of each workflow with examples, custom workflow plugins, and workflow system architecture. No code changes needed.",
      "steps": [
        "Add Workflows section after Plugins in README.md - ALREADY DONE (line 564)",
        "Document available built-in workflows - ALREADY DONE (lines 578-583)",
        "Explain workflow selection via --workflow flag - ALREADY DONE (lines 585-597)",
        "Document workflow-specific configuration - ALREADY DONE (lines 599-625)",
        "Add usage examples for workflow commands - ALREADY DONE (lines 570-576)",
        "Explain how to create custom workflow plugins - ALREADY DONE (lines 715-742)",
        "Add workflow system to Architecture section - ALREADY DONE (lines 744-768, 894)"
      ],
      "tags": [
        "docs",
        "workflows",
        "architecture"
      ],
      "files": [
        "README.md"
      ],
      "updated_at": "2026-01-25T09:22:51Z"
    },
    {
      "id": "T069",
      "title": "Document role-based agent configuration in README.md",
      "priority": 2,
      "status": "done",
      "description": "Role-based agent configuration is implemented but not fully documented. The README only mentions --repair-agent, --review-agent, --bootstrap-agent flags but not the full [roles] config section.",
      "details": "Documentation already comprehensive in README.md. Verified complete at lines 225 to 342. No changes needed.",
      "steps": [
        "Add role-based configuration to the 'Configuration' section in README.md",
        "Document the [roles] TOML section with all available roles: iter, review, repair, bootstrap",
        "Explain precedence: roles config > individual step agent flags > defaults",
        "Provide example configuration showing different agents for different roles",
        "Document when to use role-based configuration vs simple schedule setting",
        "Update CLI flags reference to clarify relationship with roles config"
      ],
      "tags": [
        "docs",
        "config",
        "agents"
      ],
      "files": [
        "README.md",
        "internal/config/example.go",
        "internal/config/getters.go",
        "internal/config/types.go"
      ],
      "updated_at": "2026-01-25T09:27:14Z"
    },
    {
      "id": "T070",
      "title": "Document workflow CLI commands in README.md usage section",
      "priority": 2,
      "status": "done",
      "description": "The looper workflow command is implemented (cmd/root.go:2706-2797) but not shown in the README Usage section.",
      "details": "Documentation verified present in README.md Usage section (lines 96-98): looper workflow list, looper workflow describe <name>. Full workflow documentation exists in Workflows section (lines 688-893). Task already complete - no code changes needed.",
      "steps": [
        "Add workflow commands to the Usage section in README.md",
        "Document 'looper workflow list' command with example output",
        "Document 'looper workflow describe <name>' command with example output",
        "Add --workflow flag documentation to 'looper run' usage",
        "Include workflow commands in the architecture diagram or overview"
      ],
      "tags": [
        "docs",
        "cli",
        "workflows"
      ],
      "files": [
        "README.md"
      ],
      "updated_at": "2026-01-25T09:34:37Z"
    },
    {
      "id": "T071",
      "title": "Document workflow-specific configuration in README.md",
      "priority": 2,
      "status": "done",
      "description": "Workflows support per-workflow configuration via [workflows.<name>] sections in looper.toml, but this is not documented.",
      "details": "Documentation already comprehensive in README.md. Verified: lines 745-771 explain [workflows.<name>] pattern, lines 773-857 document each workflow with tables (parallel, code-review, incident-triage), lines 863-871 explain discovery via looper workflow describe, lines 486-502 show examples in main config. Task already complete - no changes needed.",
      "steps": [
        "Add workflow configuration subsection to the Configuration section in README.md",
        "Document the [workflows.<name>] pattern for per-workflow settings",
        "Provide configuration examples for each built-in workflow: traditional, parallel, incident_triage, code_review",
        "Explain how to discover workflow-specific settings using 'looper workflow describe'",
        "Add workflow configuration to the example looper.toml in README"
      ],
      "tags": [
        "docs",
        "config",
        "workflows"
      ],
      "files": [
        "README.md",
        "internal/config/types.go",
        "internal/workflows/types.go"
      ],
      "updated_at": "2026-01-25T09:41:54Z"
    },
    {
      "id": "T072",
      "title": "Document core plugins bundle in README.md",
      "priority": 3,
      "status": "done",
      "description": "The core plugins bundle (internal/coreplugins/) provides auto-extraction of built-in plugins but is not mentioned in README.",
      "details": "Documentation already comprehensive in README.md. Verified complete at lines 848-927. All steps covered: core plugins explanation, auto-extraction process, priority order, override examples, and architecture section. No changes needed - documentation already present.",
      "tags": [
        "docs",
        "plugins",
        "architecture"
      ],
      "files": [
        "README.md",
        "internal/coreplugins/bundle.go",
        "internal/coreplugins/claude.go",
        "internal/coreplugins/codex.go",
        "internal/coreplugins/traditional.go"
      ],
      "updated_at": "2026-01-25T10:31:16Z"
    },
    {
      "id": "T073",
      "title": "Document plugin validation and creation commands in README.md",
      "priority": 3,
      "status": "done",
      "description": "The README briefly mentions plugin commands but doesn't explain 'looper plugin validate' and 'looper plugin create' in detail.",
      "details": "Plugin system includes comprehensive validation (internal/plugin/manifest.go:70-123) and skeleton creation (cmd/plugin_create.go). Validation checks required fields, category-specific config, plugin name format, and binary path. Creation generates a complete plugin skeleton with manifest. These are powerful developer tools that deserve documentation.",
      "steps": [
        "Add detailed plugin command documentation to the Plugins section in README.md",
        "Document 'looper plugin validate <path>' with validation rules explained",
        "Document 'looper plugin create <name> --type agent|workflow' with examples",
        "Explain the plugin manifest validation rules and error messages",
        "Provide a walkthrough of creating a custom plugin from skeleton to working plugin",
        "Document plugin manifest fields and their requirements"
      ],
      "tags": [
        "docs",
        "plugins",
        "developer"
      ],
      "files": [
        "README.md"
      ],
      "updated_at": "2026-01-25T10:32:43Z"
    },
    {
      "id": "T074",
      "title": "Document advanced logging configuration in README.md",
      "priority": 4,
      "status": "done",
      "description": "Advanced logging configuration options (log_level, log_format, log_timestamps, log_caller) exist in internal/config/types.go:90-94 but are not documented.",
      "details": "The Config struct includes LogLevel, LogFormat, LogTimestamps, and LogCaller fields. These allow fine-grained control over logging output format and verbosity. While the basic logging is documented, these advanced options are not mentioned. Users who want to customize log output won't know these options exist.",
      "steps": [
        "Add advanced logging configuration to the Configuration section in README.md",
        "Document log_level option with available levels (debug, info, warn, error)",
        "Document log_format option (json, text)",
        "Document log_timestamps and log_caller boolean flags",
        "Provide examples of different logging configurations",
        "Explain when to use each logging option",
        "Add to example looper.toml in README"
      ],
      "tags": [
        "docs",
        "config",
        "logging"
      ],
      "files": [
        "README.md",
        "to-do.json"
      ],
      "updated_at": "2026-01-25T10:41:07Z"
    },
    {
      "id": "T075",
      "title": "Document plugin capabilities system in README.md",
      "priority": 4,
      "status": "done",
      "description": "Plugins declare capabilities (can_modify_files, can_execute_commands, can_access_network, can_access_env) but this system is not documented.",
      "details": "internal/plugin/types.go and internal/plugin/capabilities.go define the capability declaration system. Plugin manifests include a [capabilities] section where plugins declare what they're allowed to do. This is important for security and sandboxing but users don't know it exists or how to interpret/modify capabilities.",
      "steps": [
        "Add plugin capabilities documentation to the Plugins section in README.md",
        "Explain the [capabilities] section in plugin manifests",
        "Document each capability flag: can_modify_files, can_execute_commands, can_access_network, can_access_env",
        "Explain how capabilities affect plugin security and permissions",
        "Provide examples of capability declarations in plugin manifests",
        "Document how looper enforces or uses capability declarations"
      ],
      "tags": [
        "docs",
        "plugins",
        "security"
      ],
      "files": [
        "README.md"
      ],
      "updated_at": "2026-01-25T10:43:18Z"
    },
    {
      "id": "T076",
      "title": "Document plugin configuration in README.md",
      "priority": 4,
      "status": "todo",
      "description": "Plugins can be configured via [plugins.<name>] sections in looper.toml with timeout, work_dir, binary, model, reasoning, enabled options, but this is not documented.",
      "details": "internal/config/types.go:181-224 defines PluginConfig and PluginSettings. Users can configure plugin execution timeout, working directory, override binary path, set model/reasoning for agent plugins, and enable/disable plugins without uninstalling. This is useful for tuning plugin behavior but completely undocumented.",
      "steps": [
        "Add plugin configuration documentation to the Configuration section in README.md",
        "Document the [plugins.<name>] section pattern",
        "Explain each plugin setting: timeout, work_dir, binary, model, reasoning, enabled",
        "Provide examples of plugin configuration for common scenarios",
        "Document how plugin config relates to plugin manifest settings",
        "Add to example looper.toml in README"
      ],
      "tags": [
        "docs",
        "config",
        "plugins"
      ],
      "files": [
        "README.md",
        "internal/config/types.go",
        "internal/config/example.go"
      ],
      "updated_at": "2026-01-25T12:00:00Z"
    },
    {
      "id": "T077",
      "title": "Implement explicit parallelism feature (designed in TODO-Parallelism.md)",
      "priority": 2,
      "status": "done",
      "description": "Implement the parallelism feature fully designed in TODO-Parallelism.md. The design document is complete with worker pool pattern, task-level parallelism, and agent-level parallelism.",
      "details": "TODO-Parallelism.md contains a complete implementation plan for adding explicit parallelism to looper-go. Features include: worker pool with bounded concurrency, task-level parallelism (multiple tasks concurrently), agent-level parallelism (multi-agent consensus per task), configurable strategies (priority, dependency, mixed), output modes (multiplexed, buffered, summary), and fail-fast option. This is a major feature that requires creating internal/parallel/ package and updating loop orchestration.",
      "steps": [
        "Phase 1: Add ParallelConfig to internal/config/types.go, add CLI flags, env var support",
        "Phase 2: Create internal/parallel package with pool.go, selector.go, executor.go",
        "Phase 3: Create MultiplexedLogWriter in internal/agents/multiplex_log_writer.go",
        "Phase 4: Implement RunParallel() in internal/loop/loop.go, update Run() dispatch",
        "Phase 5: Add race condition tests with go test -race, verify backward compatibility",
        "Update README.md to document parallelism feature and configuration",
        "Add examples to to-do.json for testing parallel execution"
      ],
      "tags": [
        "parallelism",
        "performance",
        "architecture"
      ],
      "files": [
        "README.md",
        "cmd/root.go",
        "internal/agents/multiplex_log_writer.go",
        "internal/agents/multiplex_log_writer_test.go",
        "internal/config/env.go",
        "internal/config/example.go",
        "internal/config/types.go",
        "internal/loop/loop.go",
        "internal/parallel/doc.go",
        "internal/parallel/executor.go",
        "internal/parallel/pool.go",
        "internal/parallel/pool_test.go",
        "internal/parallel/selector.go",
        "internal/parallel/selector_test.go"
      ],
      "updated_at": "2026-01-25T10:27:42Z"
    },
    {
      "id": "T078",
      "title": "Add integration tests for plugin system",
      "description": "The plugin system (internal/plugin/) has validation but no end-to-end integration tests. Add tests covering plugin discovery, loading, manifest parsing, and JSON-RPC execution.",
      "priority": 2,
      "status": "done",
      "tags": [
        "testing",
        "plugins"
      ],
      "files": [
        "internal/plugin/integration_test.go",
        "internal/plugin/registry.go"
      ],
      "updated_at": "2026-01-25T12:30:00Z",
      "details": "Added comprehensive integration tests for the plugin validation system, including tests for Validator type, all its methods, executor streaming, directory creation helpers, registry helpers, plugin installation, and manifest edge cases. Improved test coverage from 45.7% to 68.9%. Also fixed a mutex bug in EnsureUserPluginsDir."
    },
    {
      "id": "T079",
      "title": "Implement proper error logging in plugin loader",
      "description": "internal/plugin/loader.go line 129 has a TODO comment for proper logging. Replace the silent continue with actual error logging when plugin discovery fails.",
      "priority": 3,
      "status": "todo",
      "tags": [
        "logging",
        "plugins"
      ],
      "files": [
        "internal/plugin/loader.go"
      ]
    },
    {
      "id": "T080",
      "title": "Add error logging in plugin agent registration",
      "description": "internal/agents/plugin_agent.go line 193 has a TODO comment for proper logging. Add error logging when agent plugin registration fails during LoadAndRegisterAgentPlugins.",
      "priority": 3,
      "status": "todo",
      "tags": [
        "logging",
        "plugins"
      ],
      "files": [
        "internal/agents/plugin_agent.go"
      ]
    },
    {
      "id": "T081",
      "title": "Complete plugin configuration environment variable passing",
      "description": "internal/plugin/executor.go line 172 has a TODO for passing plugin configuration as environment variables. Implement this feature to allow plugins to receive their configuration via env vars.",
      "priority": 4,
      "status": "todo",
      "tags": [
        "plugins",
        "config"
      ],
      "files": [
        "internal/plugin/executor.go"
      ]
    },
    {
      "id": "T082",
      "title": "Add timeout configuration to plugin settings",
      "description": "Plugin timeout handling exists but is not configurable via looper.toml. The PluginSettings struct has a Timeout field but it is not documented or exposed in the config example.",
      "priority": 3,
      "status": "todo",
      "tags": [
        "config",
        "plugins"
      ],
      "files": [
        "internal/config/types.go",
        "internal/config/example.go"
      ]
    },
    {
      "id": "T083",
      "title": "Improve multi-agent consensus result handling",
      "description": "internal/parallel/executor.go executeMultiple() uses only the first successful result (line 119). Implement proper consensus logic like voting, merging, or conflict resolution.",
      "priority": 3,
      "status": "todo",
      "tags": [
        "parallel",
        "consensus"
      ],
      "files": [
        "internal/parallel/executor.go"
      ]
    },
    {
      "id": "T084",
      "title": "Add integration test for looper-live-test skill",
      "description": "skills/looper-live-test/SKILL.md defines a live test skill but there is no automated verification that it works. Add an integration test or CI check.",
      "priority": 4,
      "status": "todo",
      "tags": [
        "testing",
        "skills"
      ],
      "files": [
        "skills/looper-live-test/SKILL.md"
      ]
    },
    {
      "id": "T085",
      "title": "Document security model for plugin capabilities",
      "description": "Plugin capabilities system exists (can_execute_commands, can_access_network, etc.) but the README only warns about them. Add a SECURITY.md section explaining the threat model and sandboxing limitations.",
      "priority": 2,
      "status": "todo",
      "tags": [
        "security",
        "documentation"
      ],
      "files": [
        "README.md",
        "SECURITY.md"
      ]
    },
    {
      "id": "T086",
      "title": "Fix potential data race in schema cache",
      "description": "internal/todo/types.go getCachedSchema uses double-checked locking but the pattern has subtle issues. Consider using sync.Once or a more robust caching pattern.",
      "priority": 2,
      "status": "todo",
      "tags": [
        "concurrency",
        "bug"
      ],
      "files": [
        "internal/todo/types.go"
      ]
    },
    {
      "id": "T087",
      "title": "Add validation for workflow configuration sections",
      "description": "Config parsing accepts any [workflows.*] section without validation. Add validation to warn about unknown workflow configurations or typos in workflow names.",
      "priority": 4,
      "status": "todo",
      "tags": [
        "config",
        "validation"
      ],
      "files": [
        "internal/config/"
      ]
    },
    {
      "id": "T088",
      "title": "Implement graceful shutdown for running plugins",
      "description": "Plugin executor (internal/plugin/executor.go) does not handle context cancellation gracefully for long-running plugins. Add proper cleanup and timeout handling.",
      "priority": 3,
      "status": "todo",
      "tags": [
        "plugins",
        "concurrency"
      ],
      "files": [
        "internal/plugin/executor.go"
      ]
    },
    {
      "id": "T089",
      "title": "Add health check endpoint for plugin discovery",
      "description": "Plugin discovery is silent on failures. Add a --verbose flag or doctor command that reports which plugins failed to load and why.",
      "priority": 4,
      "status": "todo",
      "tags": [
        "plugins",
        "ux"
      ],
      "files": [
        "cmd/plugin_list.go",
        "internal/plugin/loader.go"
      ]
    },
    {
      "id": "T090",
      "title": "Standardize error messages across plugin commands",
      "description": "Plugin error messages use inconsistent formats. Create a centralized error formatting utility for user-facing plugin errors.",
      "priority": 4,
      "status": "todo",
      "tags": [
        "plugins",
        "ux"
      ],
      "files": [
        "cmd/plugin_*.go"
      ]
    },
    {
      "id": "T091",
      "title": "Post-deletion review: 14 follow-up tasks identified",
      "description": "After to-do.json was accidentally deleted by looper agent, a review pass identified 14 follow-up tasks for plugin system polish. All original 76 tasks (T001-T077) are verified complete in codebase.",
      "priority": 5,
      "status": "done",
      "tags": [
        "review",
        "recovery"
      ],
      "details": "Original tasks restored from git history. New tasks T078-T090 represent actual remaining work."
    }
  ]
}
